{"version":3,"sources":["../src/Featherhead.js"],"names":[],"mappings":";;;;;;;;;;;;qBAAuB,SAAS;;IAApB,KAAK;;AAEjB,IAAI,WAAW,GAAG,SAAS,CAAC;;IAEf,WAAW;AAEZ,UAFC,WAAW,GAEF;MAAT,IAAI,gCAAC,EAAE;;wBAFP,WAAW;;AAGtB,MAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC7B,OAAK,IAAI,GAAG,IAAI,IAAI,EAAE;AACrB,OAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;AACpB,OAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;GACtB;;AAED,MAAI,CAAC,IAAI,CAAC,MAAM,IAAK,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,AAAC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,EAAE,EAAE;AAClF,SAAM,KAAK,CAAC,2DAA2D,CAAC,CAAA;GACxE;EACD;;cAZW,WAAW;;SAcf,kBAAC,IAAI,EAAE;AACd,OAAI,IAAI,GAAG,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/C,OAAI,MAAM,GAAG,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEnD,OAAI,GAAG,GAAG,IAAI,CAAC;AACf,MAAG,GAAG,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAC/B,MAAG,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC3B,MAAG,GAAG,SAAS,GAAG,IAAI,GAAG,GAAG,GAAG,MAAM,GAAG,GAAG,CAAC;AAC5C,OAAI,IAAI,CAAC,YAAY,CAAC,EAAE;AACvB,OAAG,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;IACtC;;AAED,UAAO,GAAG,CAAC;GACX;;;SAEM,iBAAC,IAAI,EAAE;AACb,OAAI,IAAI,GAAG,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/C,OAAI,MAAM,GAAG,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEnD,OAAI,GAAG,GAAG,IAAI,CAAC;AACf,MAAG,GAAG,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAC/B,MAAG,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC3B,MAAG,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;AACnC,MAAG,GAAG,QAAQ,GAAG,IAAI,GAAG,GAAG,GAAG,MAAM,GAAG,GAAG,CAAC;AAC3C,OAAI,IAAI,CAAC,YAAY,CAAC,EAAE;AACvB,OAAG,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC;IACtC;;AAED,UAAO,GAAG,CAAC;GACX;;;SAEQ,qBAAG;AACX,UAAO,eAAe,CAAC;GACvB;;;QA/CW,WAAW;;;QAAX,WAAW,GAAX,WAAW","file":"Featherhead.js","sourcesContent":["import * as Utils from './Utils';\n\nvar RE_EXT_JSON = /\\.json$/;\n\nexport class Featherhead {\n\n\tconstructor(info={}) {\n\t\tlet keys = Object.keys(info);\n\t\tfor (let idx in keys) {\n\t\t\tlet key = keys[idx];\n\t\t\tthis[key] = info[key];\n\t\t}\n\n\t\tif (!this.commit || (typeof this.commit !== 'string') || this.commit.length != 40) {\n\t\t\tthrow Error(\"Featherhead: invalid commit option passed to constructor.\")\n\t\t}\n\t}\n\n\tassetURL(path) {\n\t\tlet repo = Utils.encodeURIComponent(this.repo);\n\t\tlet commit = Utils.encodeURIComponent(this.commit);\n\n\t\tlet url = path;\n\t\turl = Utils.normalizePath(url);\n\t\turl = Utils.encodeURI(url);\n\t\turl = '/asset/' + repo + '/' + commit + url;\n\t\tif (this['cdn-domain']) {\n\t\t\turl = '//' + this['cdn-domain'] + url;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tdataURL(path) {\n\t\tlet repo = Utils.encodeURIComponent(this.repo);\n\t\tlet commit = Utils.encodeURIComponent(this.commit);\n\n\t\tlet url = path;\n\t\turl = Utils.normalizePath(url);\n\t\turl = Utils.encodeURI(url);\n\t\turl = url.replace(RE_EXT_JSON, '');\n\t\turl = '/data/' + repo + '/' + commit + url;\n\t\tif (this['cdn-domain']) {\n\t\t\turl = '//' + this['cdn-domain'] + url;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tcommitURL() {\n\t\treturn '/_data/commit';\n\t}\n\n}\n"]}